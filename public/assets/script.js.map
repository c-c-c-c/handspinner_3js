{"version":3,"sources":["../../src/script/script.js"],"names":["howManySpinners","scene","THREE","Scene","box","controls","renderer","camera","model","model2","model3","rotate_speed","r_radian","c_radian","r_radian_speed","c_radian_speed","count","geometry","material","scroll_px","delta_scroll_px","sum_delta_scroll_px","$window","$","window","renderHandSpinner","light","ambient","gridHelper","axisHelper","lightHelp","width","height","modelPath","DirectionalLight","position","set","add","AmbientLight","PerspectiveCamera","lookAt","i","WebGLRenderer","antialias","setSize","setClearColor","setPixelRatio","devicePixelRatio","document","getElementsByClassName","appendChild","domElement","loader","JSONLoader","load","geo","mat","phongMat","MeshPhongMaterial","Mesh","randX","Math","random","randY","randZ","scale","randColor","color","Color","opacity","transparent","render","requestAnimationFrame","rotation","y","sin","cameraZ","countScroll","scroll","before_scroll_px","console","log","scrollTop","addHoverImgChange","hover","e","currentTarget","find","each","ev","attr","animate","ready"],"mappings":"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","file":"script.js","sourcesContent":["let howManySpinners = 300;\nlet scene = new THREE.Scene();\nlet box;\nlet controls;\nlet renderer = [];\nlet camera;\nlet model = [];\n//let model = {};\nlet model2 = {};\nlet model3 = {};\nlet rotate_speed = 200;\nlet r_radian = 0;\nlet c_radian = 0;\nlet r_radian_speed =0.01;\nlet c_radian_speed =0.007;\nlet count = 0;\n\nlet geometry;\nlet material;\nlet scroll_px = 0;\nlet delta_scroll_px = 0;\nlet sum_delta_scroll_px = 0.05;\nconst $window = $(window);\n\nfunction renderHandSpinner () {\n  'use strict';\n  let light;\n  let ambient;\n  let gridHelper;\n\tlet axisHelper;\n  let lightHelp;\n  let width = 1440;\n  let height = 6700;\n\tlet modelPath ;\n\n   //light\n  light = new THREE.DirectionalLight(0xffffff, 1);\n  light.position.set(0, 200, 80);\n  scene.add(light);\n  ambient = new THREE.AmbientLight(0x404040);\n  scene.add(ambient);\n\n\t//camera\n  camera = new THREE.PerspectiveCamera(45, width/height, 1, 1000);\n  camera.position.set(300, 3000, 2500);\n  camera.lookAt(scene.position);\n\n  // helper 現在は非表示\n  //gridHelper = new THREE.GridHelper(200, 50);\n  //scene.add(gridHelper);\n  //axisHelper = new THREE.AxisHelper(1000);\n  //scene.add(axisHelper);\n  //lightHelper = new THREE.DirectionalLightHelper(light , 20)\n  //scene.add(lightHelper);\n\n  //controls\n\t//controls = new THREE.OrbitControls(camera);\n  //cameraの自動回転\n  //controls.autoRotate = true;\n // controls.autoRotateSpeed = 1.5;\n\n  // renderer\n  for (let i= 0 ; i < 1; i++ ) {\n  \trenderer = new THREE.WebGLRenderer({ antialias: true });\n  \trenderer.setSize(width, height);\n  \trenderer.setClearColor(0xffffff);\n  \trenderer.setPixelRatio(window.devicePixelRatio);\n\n\t\tdocument.getElementsByClassName('stage_bg')[0].appendChild(renderer.domElement);\n\t}\n\n  //modelPath = '../src/data/handspiner_3d_geo.json';\n  modelPath = './src/data/handspiner_3d_geo.json';\n\t//modelPath = '/Users/yoshimurahiroyuki/workspace/threejs/src/handspiner.json';\n\n  let loader = new THREE.JSONLoader();　　\n  loader.load(modelPath, function(geo, mat) {　　　\n\n    geometry = geo;\n    material = mat;\n\n\t\tfor (let i=0; i < howManySpinners; i++ ) {\n      let phongMat = new THREE.MeshPhongMaterial(mat);\n      model[i] = new THREE.Mesh(geo, phongMat);\n\n\t\t\tlet randX = 90 * Math.random()-70;\n\t\t\tlet randY = 240 * Math.random()+240;\n\t\t\tlet randZ = 70 * Math.random()+30;\n\n      if (i==0) {\n\t\t\t\t model[i].position.set(0, 20, 0);\n\t\t\t} else {\n\t\t\t\tmodel[i].position.set(randX, randY, randZ);\n\t\t\t}　　\n\n    \tmodel[i].scale.set(0.03, 0.03, 0.03);　\n    \tlet randColor = Math.random() * 0xffffff ;　　　\n    \tmodel[i].material.color = new THREE.Color(randColor);\n    \tmodel[i].material.opacity = 0.15;\n\t\t\tmodel[i].material.transparent = true;\n\t\t\tscene.add(model[i]);　　　\n\t\t}\n    render();\n  });　\n}\n\n/*\nfunction addSpinner () {\n  let phongMat = new THREE.MeshPhongMaterial(material);\n  model = new THREE.Mesh(geometry, phongMat);\n\tlet randX = 800 * Math.random();\n\tlet randY = 800 * Math.random();\n\tlet randZ = 800 * Math.random();\n\n  let size = Math.random();\n\tmodel.scale.set(size, size, size);　　　\n  model.position.set(randX, randY, randZ);\n\tlet randColor = Math.random() * 0xffffff;　　　\n\tmodel.material.color = new THREE.Color(randColor);\n\tscene.add(model);　\n}\n*/\n\n\nfunction render () {\n\n  requestAnimationFrame(render);\n  r_radian += r_radian_speed;\n  count++;\n\n\tfor (let i=0; i < howManySpinners; i++ ) {\n  \tif( delta_scroll_px < 0 )  {\n\t\t\trotate_speed = 0;\n\t\t\tsum_delta_scroll_px = 0;\n\t\t\tr_radian_speed=0;\n\t\t\tc_radian_speed=0;\n\t\t} else {\n\t\t\trotate_speed =  sum_delta_scroll_px/4000 + 0.07;\n\t\t\tr_radian_speed=0.01;\n\t\t\tc_radian_speed=0.007;\n\t\t}\n\n\t\tmodel[i].rotation.y += rotate_speed;\n    model[i].position.y += (Math.sin(r_radian) - Math.sin(r_radian-r_radian_speed))*15 ;\n\n\n\t\tif (rotate_speed == 0 ) {\n\t\t\tif (count%50 < 25 ) {\n\t\t\t\tmodel[i].rotation.y += 0.02;\n\t\t\t} else {\n\t\t\t\tmodel[i].rotation.y -= 0.02;\n\t\t\t}\n\t\t}\n\t}\n\n\tc_radian += c_radian_speed;\n  let cameraZ =  5 * (Math.sin(c_radian)) +180;\n\tcamera.position.set(0, 600, cameraZ);\n\n\t//for (let i=0; i<4; i++) {\n  renderer.render(scene, camera);\n  //controls.update();\n\t// }\n}\n\n\nfunction countScroll () {\n\t// スクロールしたら発動\n\t$window.scroll(function() {\n\t\tlet before_scroll_px = scroll_px;\n\t\tconsole.log(sum_delta_scroll_px);\n\t\t// スクロール量を変数に格納\n\t\tscroll_px = $(this).scrollTop();\n\t\tdelta_scroll_px = (scroll_px) - (before_scroll_px);\n\t\tsum_delta_scroll_px +=delta_scroll_px;\n\n\t});\n}\n\nfunction addHoverImgChange () {\n\t$( '.item_box' ).hover((e)=>{\n\n\t\t\t$(e.currentTarget).find(\"img\").each((i, ev)=>{\n\t\t\t\tif ($(ev).attr(\"class\") == \"not_spin\"  ){\n\t\t\t\t\t$(ev).animate({opacity: 0});//\n\t\t\t\t} else {\n\t\t\t\t\t$(ev).animate({opacity: 1});\n\t\t\t\t}\n\t\t\t});\n\n\t},(e)=>{\n\n\t\t$(e.currentTarget).find(\"img\").each((i, ev)=>{\n\t\t\tif ($(ev).attr(\"class\") == \"not_spin\"  ){\n\t\t\t\t$(ev).animate({opacity:1});\n\t\t\t} else {\n\t\t\t\t$(ev).animate({opacity:0});\n\t\t\t}\n\t\t});\n\t});\n}\n\n/*\nfunction addHoverImgChange() {\n\tlet notSpinImages = document.getElementsByClassName(\"not_spin\")\n\tconst ImageN = 6;\n\tfor (i=0 ;i<6; i++ ){\n\t\tnotSpinImages[i].addEve\n\n\t}\n*/\n\n\n\n\n$(document).ready(function() {\n\t$(countScroll());\n\t$(addHoverImgChange());\n\trenderHandSpinner();\n});\n"]}